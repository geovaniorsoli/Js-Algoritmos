<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/Style/style.css">
    <title>Venda carros</title>
</head>
<body>
    <h1> Venda Carros </h1>

    <div class="container">
        <div class="form-section">
            <h3> Cadastrar carros </h3>
            <form id="CadCarros">
                <p> Modelo </p>
                <input id="NomeCarro" class="inputclass" type="text" required autofocus>
                <p> Preço </p>
                <input id="PrecoCarro" class="inputclass" type="number" required> 
                <input id="Botao" type="submit" value="Cadastrar">
            </form>
            <div class="mt-2">
                <button id="btlistar" type="button" class="btnclass2"> Listar </button>
                <button id="btfiltrar" type="button" class="btnclass3"> Filtrar</button>
                <button id="btsimular" type="button" class="btnclass4"> Simular</button>
            </div>
        </div>

        <div class="response-section">
            <h2 id="resposta"> </h2>
        </div>
    </div>


    <script>

        let Carros = [];

        function CadCarros(e) {
            e.preventDefault();
        
            const NomeCarro = document.getElementById("NomeCarro").value; 
            const PrecoCarro = parseFloat(document.getElementById("PrecoCarro").value);
        
            Carros.push({ NomeCarro, PrecoCarro });
        
            document.getElementById('NomeCarro').value = '';
            document.getElementById('PrecoCarro').value = '';
        }
        
        document.getElementById('CadCarros').addEventListener('submit', CadCarros);
        
        document.getElementById('btlistar').addEventListener('click', function () {
            if (Carros.length === 0) {
                alert('Lista vazia');
                return;
            }
        
            let lista = Carros.reduce((acumulador, carro) => 
                acumulador + `${carro.NomeCarro} - R$: ${carro.PrecoCarro.toFixed(2)}\n`, "");
            document.getElementById("resposta").innerText = `Lista de carros\n${"-".repeat(20)}\n${lista}`;
        });
        
        document.getElementById("btfiltrar").addEventListener('click', function () {
            const max = Number(prompt('Qual o valor máximo que deseja pagar?'));
            if (max === 0 || isNaN(max)) {
                alert('Número inválido');
                return;
            }
        
            const CarrosFiltrados = Carros.filter(carro => carro.PrecoCarro <= max);
            if (CarrosFiltrados.length === 0) {
                alert('Não tem carros cadastrados nessa faixa de preço');
                return;
            }
        
            let lista = CarrosFiltrados.reduce((acumulador, carro) => 
                acumulador + `${carro.NomeCarro} - R$ ${carro.PrecoCarro.toFixed(2)}\n`, "");
            document.getElementById("resposta").innerText = `Carros até R$ ${max.toFixed(2)}\n${"-".repeat(20)}\n${lista}`;
        });
        


    </script>
</body>
</html>